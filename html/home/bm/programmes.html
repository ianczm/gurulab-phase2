<!-- 
Data structure needed
1.  Title
2.  Category [Object]
    - Hours (1.5 hours per week)
    - Ages (10-20)
    - Level (Pre-intermediate)
3.  Body
4.  Features [Array]
    - (check mark)
5.  Package [Array: 3 Package Items]
    - Package Item [Object]
      - Title
      - Price
      - Monthly
      - Link
 -->

<div class="section section-programmes">
  <div class="accordions">
    <div class="accordion-item">
      <a id="english-essentials_hash"></a>
      <div class="accordion-header">
        <div class="desc">
          <h3 class="title">Asas Bahasa Inggeris</h3>
          <p class="subtitle">
            Sesuai untuk semua; Membina asas yang kukuh dalam semua kemahiran â€“
            menulis, bertutur, membaca & mendengar
          </p>
        </div>
        <div class="dropdown-icon"><i class="fa-solid fa-plus"></i></div>
      </div>
      <div class="accordion-content">
        <h4 class="accordion-section-title">Butiran</h4>
        <div class="body">
          <p>
            Program seimbang yang direka untuk pelajar yang bertujuan membina
            asas yang kukuh dalam semua kemahiran - bertutur, menulis, membaca
            dan mendengar, yang diuji dalam PT3, SPM, UEC dan IGCSE (Bahasa
            Kedua).
          </p>
        </div>
        <div class="content-cards">
          <div class="content-card categories">
            <ul>
              <li class="content-card-item category-item">
                <i class="fa-solid fa-address-book"></i>
                <p>1.5 jam setiap minggu</p>
              </li>
              <li class="content-card-item category-item">
                <i class="fa-solid fa-address-book"></i>
                <p>Umur 10 - 20</p>
              </li>
              <li class="content-card-item category-item">
                <i class="fa-solid fa-address-book"></i>
                <p>
                  Pra-pertengahan - Pelajar bahasa Inggeris tahap tinggi (A2 to
                  C1)
                </p>
              </li>
            </ul>
          </div>
          <div class="content-card features">
            <ul>
              <li class="content-card-item feature-item">
                <i class="fa-solid fa-circle-check"></i>
                <p>Maklum balas terperinci latihan menulis dan bertutur</p>
              </li>
              <li class="content-card-item feature-item">
                <i class="fa-solid fa-circle-check"></i>
                <p>Latihan yang dikhaskan berdasarkan maklum balas</p>
              </li>
              <li class="content-card-item feature-item">
                <i class="fa-solid fa-circle-check"></i>
                <p>
                  Pengalaman pembelajaran yang menarik dengan kuiz, visual dan
                  bahan yang menarik
                </p>
              </li>
            </ul>
          </div>
        </div>
        <h4 class="accordion-section-title">Harga</h4>
        <div class="pricing">
          <div class="packages">
            <ul class="package-item-container package-item-container--1">
              <li class="package-item" nav-idx="1">
                <div class="package-item-text">
                  <h4 class="title">Pakej Bulanan</h4>
                  <h1 class="price">RM 90</h1>
                  <p class="price-monthly"></p>
                </div>
                <div class="gurulab-component-container">
                  <a
                    href="/sign-up/?SQF_SOURCE=programmes_ee1"
                    target="_blank"
                    class="gurulab-button bg-light size-large color-orange justify-center"
                    >Daftar Sekarang</a
                  >
                </div>
              </li>
              <li class="package-item" nav-idx="2">
                <div class="package-item-text">
                  <h4 class="title">Pakej 3 Bulan</h4>
                  <h1 class="price">RM 240</h1>
                  <p class="price-monthly">RM 80 / Sebulan</p>
                </div>
                <div class="gurulab-component-container">
                  <a
                    href="/sign-up/?SQF_SOURCE=programmes_ee2"
                    target="_blank"
                    class="gurulab-button bg-light size-large color-orange justify-center"
                    >Daftar Sekarang</a
                  >
                </div>
              </li>
              <li class="package-item" nav-idx="3">
                <div class="package-item-text">
                  <h4 class="title">Pakej 12 Bulan</h4>
                  <h1 class="price">RM 840</h1>
                  <p class="price-monthly">RM 70 / Sebulan</p>
                </div>
                <div class="gurulab-component-container">
                  <a
                    href="/sign-up/?SQF_SOURCE=programmes_ee3"
                    target="_blank"
                    class="gurulab-button bg-light size-large color-orange justify-center"
                    >Daftar Sekarang</a
                  >
                </div>
              </li>
            </ul>
            <div class="package-item-scroll-nav package-item-scroll-nav--1">
              <div class="package-item-scroll-nav-dots" nav-idx="1"></div>
              <div class="package-item-scroll-nav-dots" nav-idx="2"></div>
              <div class="package-item-scroll-nav-dots" nav-idx="3"></div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="accordion-item">
      <a id="writing-masterclass_hash"></a>
      <div class="accordion-header">
        <div class="desc">
          <h3 class="title">Kelas Induk Penulisan</h3>
          <p class="subtitle">
            Direka untuk pelajar yang mempunyai asas yang kukuh; Membawa
            kemahiran menulis anda ke peringkat seterusnya
          </p>
        </div>
        <div class="dropdown-icon"><i class="fa-solid fa-plus"></i></div>
      </div>
      <div class="accordion-content">
        <h4 class="accordion-section-title">Butiran</h4>
        <div class="body">
          <p>
            Pelajar yang mempunyai asas kukuh yang ingin kekal di hadapan akan
            diajar untuk menulis secara kritis dan kreatif mengenai pelbagai
            topik dan hal ehwal semasa. Ini membantu mereka untuk berprestasi
            lebih baik dalam SPM, UEC-Senior, IGCSE (bahasa pertama dan kedua),
            MUET dan IELTS.
          </p>
        </div>
        <div class="content-cards">
          <div class="content-card categories">
            <ul>
              <li class="content-card-item category-item">
                <i class="fa-solid fa-address-book"></i>
                <p>2 jam setiap minggu</p>
              </li>
              <li class="content-card-item category-item">
                <i class="fa-solid fa-address-book"></i>
                <p>Umur 13-20</p>
              </li>
              <li class="content-card-item category-item">
                <i class="fa-solid fa-address-book"></i>
                <p>
                  Pertengahan - Pelajar bahasa Inggeris tahap tinggi (B2 & C1)
                </p>
              </li>
            </ul>
          </div>
          <div class="content-card features">
            <ul>
              <li class="content-card-item feature-item">
                <i class="fa-solid fa-circle-check"></i>
                <p>
                  Berlatih sekurang-kurangnya 30 esei setahun dengan maklum
                  balas terperinci
                </p>
              </li>
              <li class="content-card-item feature-item">
                <i class="fa-solid fa-circle-check"></i>
                <p>
                  Pendedahan kepada topik penulisan yang mencabar seperti
                  inovasi teknologi, peristiwa sejarah, jenayah dan
                  undang-undang dan lain lain
                </p>
              </li>
              <li class="content-card-item feature-item">
                <i class="fa-solid fa-circle-check"></i>
                <p>
                  Berpeluang menyertai pertandingan menulis peringkat kebangsaan
                </p>
              </li>
            </ul>
          </div>
        </div>
        <h4 class="accordion-section-title">Harga</h4>
        <div class="pricing">
          <div class="packages">
            <ul class="package-item-container package-item-container--2">
              <li class="package-item" nav-idx="1">
                <div class="package-item-text">
                  <h4 class="title">Pakej Bulanan</h4>
                  <h1 class="price">RM 135</h1>
                  <p class="price-monthly"></p>
                </div>
                <div class="gurulab-component-container">
                  <a
                    href="/sign-up/?SQF_SOURCE=programmes_wm1"
                    target="_blank"
                    class="gurulab-button bg-light size-large color-orange justify-center"
                    >Daftar Sekarang</a
                  >
                </div>
              </li>
              <li class="package-item" nav-idx="2">
                <div class="package-item-text">
                  <h4 class="title">Pakej 3 Bulan</h4>
                  <h1 class="price">RM 360</h1>
                  <p class="price-monthly">RM 120 / Sebulan</p>
                </div>
                <div class="gurulab-component-container">
                  <a
                    href="/sign-up/?SQF_SOURCE=programmes_wm2"
                    target="_blank"
                    class="gurulab-button bg-light size-large color-orange justify-center"
                    >Daftar Sekarang</a
                  >
                </div>
              </li>
              <li class="package-item" nav-idx="3">
                <div class="package-item-text">
                  <h4 class="title">Pakej 12 Bulan</h4>
                  <h1 class="price">RM 1,200</h1>
                  <p class="price-monthly">RM 100 / Sebulan</p>
                </div>
                <div class="gurulab-component-container">
                  <a
                    href="/sign-up/?SQF_SOURCE=programmes_wm3"
                    target="_blank"
                    class="gurulab-button bg-light size-large color-orange justify-center"
                    >Daftar Sekarang</a
                  >
                </div>
              </li>
            </ul>
            <div class="package-item-scroll-nav package-item-scroll-nav--2">
              <div class="package-item-scroll-nav-dots" nav-idx="1"></div>
              <div class="package-item-scroll-nav-dots" nav-idx="2"></div>
              <div class="package-item-scroll-nav-dots" nav-idx="3"></div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<style>
  .section-programmes ul {
    list-style: none;
    padding: 0;
  }

  .section-programmes .accordion-header {
    padding: 40px;
    /* background: white; */
    display: flex;
    justify-content: space-between;
    align-items: center;
    position: relative;
    box-shadow: 0 0 0px rgba(0, 0, 0, 0.2);
    cursor: pointer;
    transition: background 0.2s ease, box-shadow 0.2s ease;
  }

  .section-programmes .accordion-header * {
    transition: color 0.2s ease;
  }

  .section-programmes .accordion-header::before {
    content: "";
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    height: 3px;
    background-color: var(--gurulab-orange);
  }

  .section-programmes .accordion-header .desc > * {
    margin: 0;
  }

  .section-programmes .accordion-header .desc .title {
    color: var(--gurulab-orange);
    margin-bottom: 0.25rem;
  }

  .section-programmes .accordion-header .dropdown-icon {
    margin-left: 15px;
  }

  .section-programmes .accordion-header .dropdown-icon i {
    color: var(--gurulab-orange);
    font-size: 1.25rem;
    transform: rotate(-90deg);
    transition: transform 0.2s ease;
  }

  .section-programmes .accordion-header:hover .dropdown-icon i,
  .section-programmes .accordion-header.active .dropdown-icon i {
    transform: rotate(0deg);
    transition: transform 0.2s ease;
  }

  .section-programmes .accordion-header.active,
  .section-programmes .accordion-header:hover {
    background: var(--gurulab-orange);
    box-shadow: 0 0 30px rgba(0, 0, 0, 0.1);
    transition: background 0.2s ease, box-shadow 0.2s ease;
  }

  .section-programmes .accordion-header.active *,
  .section-programmes .accordion-header:hover * {
    color: white !important;
    transition: color 0.2s ease;
  }

  .section-programmes .accordion-content * {
    margin: 0;
  }

  .section-programmes .accordion-content > * {
    margin-bottom: 1.5rem;
  }

  .section-programmes .accordion-content {
    padding: 40px;
    background: white;
    box-shadow: 0 0 30px rgba(0, 0, 0, 0.1);
  }

  .section-programmes .accordion-content .content-cards {
    display: grid;
    grid-template-columns: 1fr 1fr;
    grid-gap: 15px;
  }

  .section-programmes .accordion-content .content-card .content-card-item > * {
    margin: 0;
  }

  .section-programmes .accordion-content .content-card .content-card-item {
    display: flex;
    padding: 20px;
    position: relative;
    box-shadow: 0 0 30px rgba(0, 0, 0, 0.1);
    background-color: white;
    font-weight: 500;
    cursor: default;
    transition: color 0.2s ease, background-color 0.2s ease;
  }

  .section-programmes .accordion-content .content-card .category-item {
    color: var(--gurulab-orange);
  }

  /* .section-programmes .accordion-content .content-card .category-item:hover {
    color: white;
    background-color: var(--gurulab-orange);
    transition: color 0.2s ease, background-color 0.2s ease;
  } */

  .section-programmes .accordion-content .content-card .feature-item {
    color: var(--gurulab-teal);
  }

  /* .section-programmes .accordion-content .content-card .feature-item:hover {
    color: white;
    background-color: var(--gurulab-teal);
    transition: color 0.2s ease, background-color 0.2s ease;
  } */

  .section-programmes
    .accordion-content
    .content-card
    .content-card-item:not(:last-child) {
    margin-bottom: 15px;
  }

  .section-programmes
    .accordion-content
    .content-card
    .content-card-item::before {
    content: "";
    position: absolute;
    bottom: 0;
    left: 0;
    top: 0;
    width: 3px;
    background-color: var(--gurulab-orange);
  }

  .section-programmes .accordion-content .content-card .feature-item::before {
    background-color: var(--gurulab-teal);
  }

  .section-programmes .accordion-content .content-cards .content-card-item i {
    margin-right: 15px;
  }

  .section-programmes
    .accordion-content
    .pricing
    .packages
    .package-item-container {
    overflow-x: scroll;
    scroll-snap-type: inline mandatory;
    display: grid;
    grid-gap: 15px;
    grid-auto-flow: column;
    grid-auto-columns: calc(100%);
    box-shadow: 0 0 30px rgba(0, 0, 0, 0.1);
  }

  .section-programmes
    .accordion-content
    .pricing
    .packages
    .package-item-container {
    scrollbar-width: none;
  }

  .section-programmes
    .accordion-content
    .pricing
    .packages
    .package-item-container::-webkit-scrollbar {
    display: none;
  }

  .section-programmes .accordion-content .pricing .packages .package-item {
    background-color: white;
    padding: 40px;
    position: relative;
    box-shadow: 0 0 30px rgba(0, 0, 0, 0.1);
    /* box-shadow: 0 0 30px rgba(244, 136, 71, 0.1); */
    transition: background-color 0.2s ease, padding 0.2s ease;
    z-index: 0;
    scroll-snap-align: center;
    text-align: center;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    height: 175px;
  }

  .section-programmes
    .accordion-content
    .pricing
    .packages
    .package-item::before {
    content: "";
    position: absolute;
    left: 0;
    bottom: 0;
    top: 0;
    width: 3px;
    background: var(--gurulab-orange);
  }

  .section-programmes
    .accordion-content
    .pricing
    .packages
    .package-item
    .title {
    text-transform: uppercase;
    color: black;
    font-size: 1rem;
    position: relative;
    /* z-index: 1; */
  }

  .section-programmes
    .accordion-content
    .pricing
    .packages
    .package-item
    .price {
    color: var(--gurulab-orange);
    font-size: 2.5rem;
    position: relative;
    /* z-index: 1; */
  }

  .section-programmes
    .accordion-content
    .pricing
    .packages
    .package-item
    .price-monthly {
    position: relative;
    /* z-index: 1; */
  }

  /* Scroll Nav Dots */
  .package-item-scroll-nav {
    display: grid;
    grid-auto-flow: column;
    grid-gap: 5px;
    justify-content: center;
    padding-top: 1rem;
  }

  .package-item-scroll-nav-dots {
    width: 7px;
    height: 7px;
    border-radius: 100%;
    background-color: rgba(244, 136, 71, 0);
    transition: background-color 0.2s ease;
    border: 2px solid var(--gurulab-orange);
  }

  .package-item-scroll-nav-dots.active {
    background-color: rgba(244, 136, 71, 1);
    transition: background-color 0.2s ease;
  }

  @media only screen and (max-width: 1024px) {
    .section-programmes .accordion-header {
      padding: 20px;
    }

    .section-programmes .accordion-content {
      padding: 20px;
    }

    .section-programmes .accordion-content .accordion-section-title {
      margin-bottom: 0.5rem;
    }

    .section-programmes .accordion-content .content-cards {
      grid-template-columns: 1fr;
      grid-gap: 0.5rem;
    }

    .section-programmes
      .accordion-content
      .content-card
      .content-card-item:not(:last-child) {
      margin-bottom: 0.5rem;
    }

    .section-programmes .accordion-content .content-card .content-card-item {
      padding: 10px 20px;
    }

    .section-programmes .accordion-content .pricing .packages .package-item {
      padding: 20px;
    }
  }

  @media only screen and (min-width: 1025px) {
    .package-item-container {
      overflow-x: hidden;
      scroll-snap-type: none;
      grid-template-columns: 1fr 1fr 1fr;
    }

    .package-item-scroll-nav {
      display: none;
    }
  }
</style>

<script>
  $(".section-programmes .accordion-item .accordion-content").hide();

  $(".section-programmes .accordion-item .accordion-header").click(function () {
    $(this).toggleClass("active");
    $(this).parent().children(".accordion-content").slideToggle(200, "swing");
  });

  // if anchor tag contains the id

  const hashChanged = () => {
    $hash = $(location).attr("hash");
    if ($hash !== "") {
      const anchor = $hash + "_hash";
      $(anchor).siblings(".accordion-header").click();
      $(window).scrollTop($(anchor).offset().top - $("#header").height() - 50);
      setTimeout(() => {
        $(window).scrollTop(
          $(anchor).offset().top - $("#header").height() - 50
        );
      }, 1000);
    }
  };

  $(document).ready(function () {
    hashChanged();
  });

  window.addEventListener("hashchange", hashChanged);

  const packageEEitem = document.querySelectorAll(
    ".package-item-container--1 .package-item"
  );
  console.log(packageEEitem);
  const packagesEENavObserver = new IntersectionObserver(
    (entries) => {
      entries.forEach((entry) => {
        if (entry.isIntersecting) {
          let navidx = entry.target.getAttribute("nav-idx");
          console.log(
            $(".package-item-scroll-nav--1 .package-item-scroll-nav-dots")
          );
          $(
            ".package-item-scroll-nav--1 .package-item-scroll-nav-dots"
          ).removeClass("active");
          $(
            `.package-item-scroll-nav--1 .package-item-scroll-nav-dots[nav-idx=${navidx}]`
          ).addClass("active");
        }
      });
    },
    {
      threshold: 0.9,
    }
  );
  packageEEitem.forEach((packagecard) => {
    packagesEENavObserver.observe(packagecard);
  });

  const packageWMitem = document.querySelectorAll(
    ".package-item-container--2 .package-item"
  );
  console.log(packageWMitem);
  const packagesWMNavObserver = new IntersectionObserver(
    (entries) => {
      entries.forEach((entry) => {
        if (entry.isIntersecting) {
          let navidx = entry.target.getAttribute("nav-idx");
          $(
            ".package-item-scroll-nav--2 .package-item-scroll-nav-dots"
          ).removeClass("active");
          $(
            `.package-item-scroll-nav--2 .package-item-scroll-nav-dots[nav-idx=${navidx}]`
          ).addClass("active");
        }
      });
    },
    {
      threshold: 0.9,
    }
  );
  packageWMitem.forEach((packagecard) => {
    packagesWMNavObserver.observe(packagecard);
  });
</script>
