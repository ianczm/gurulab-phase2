<div class="section section-sign-up">
  <div class="sign-up-header">
    <h2 class="title">GuruLab New Student<br><strong>Sign Up</strong></h2>
    <p class="subtitle"></p>
  </div>
  <div class="divider"></div>
  <div class="sign-up-form-container">
    <form action="" id="sign-up-form">
      <div class="form-page" page="1">

        <div class="form-element">
          <label for="parent-name">Parent Name *</label>
          <input type="text" name="parent-name" id="parent-name" placeholder="Adam Tan" required>
        </div>
        <div class="form-element">
          <label for="parent-mobile-number">Parent Mobile Number *</label>
          <input type="tel" name="parent-mobile-number" id="parent-mobile-number" placeholder="60123456789" required>
        </div>
        <div class="form-element">
          <label for="parent-gmail">Parent Gmail *</label>
          <p class="form-description">To send you progress reports every 3 months as well as bills.</p>
          <input type="email" name="parent-gmail" id="parent-gmail" placeholder="xx@gmail.com" required>
        </div>

        <div class="divider"></div>

        <div class="form-element">
          <label for="student-name">Student Name *</label>
          <input type="text" name="student-name" id="student-name" placeholder="Lily Tan" required>
        </div>
        <div class="form-element">
          <label for="student-mobile-number">Student Mobile Number *</label>
          <p class="form-description">We will send links when required, if any.</p>
          <input type="tel" name="student-mobile-number" id="student-mobile-number" placeholder="60123456789" required>
        </div>
        <div class="form-element">
          <label for="student-gmail">Student Gmail *</label>
          <input type="email" name="student-gmail" id="student-gmail" placeholder="xx@gmail.com" required>
        </div>

        <div class="divider"></div>

        <div class="form-element">
          <label for="gurulab-package">GuruLab Package *</label>
          <select name="gurulab-package" id="gurulab-package" onchange="updateCheckoutLink()" required>
            <option value="ee1">English Essentials (1 Month - RM 90)</option>
            <option value="ee2">English Essentials (3 Months - RM 240)</option>
            <option value="ee3">English Essentials (1 Year - RM 840)</option>
            <option value="wm1">Writing Masterclass (1 Month - RM 135)</option>
            <option value="wm2">Writing Masterclass (3 Months - RM 360)</option>
            <option value="wm3">Writing Masterclass (1 Year - RM 1,200)</option>
          </select>
        </div>
        <div class="form-element">
          <label for="class">Additional notes to the team (if any)</label>
          <textarea name="additional-notes" id="additional-notes" rows="8"></textarea>
        </div>
        <div class="form-element">
          <p><b>Note:</b> You may enter your promo code at checkout.</p>
        </div>

      </div>
      <div class="form-element form-element--button">
        <div class="gurulab-component-container">
          <a href="" target="_blank" id="form-checkout-btn" class="gurulab-button justify-left bg-light size-large color-orange">Checkout RM X,XXX</a>
        </div>
      </div>
    </form>
  </div>
</div>

<style>
  .section-sign-up {
    background: rgba(241,241,241,1);
    padding: 80px;
    border-radius: 40px;
    box-shadow: 0 0 30px rgba(0,0,0,0.1);
  }

  .section-sign-up .divider {
    width: 100%;
    height: 1px;
    background: black;
    margin: 2rem 0;
  }

  .section-sign-up strong {
    color: var(--gurulab-orange);
  }

  .section-sign-up .form-element {
    margin: 2rem 0;
  }

  .section-sign-up .form-element > * {
    display: block;
  }

  .section-sign-up .form-element label {
    margin-bottom: 0.25rem;
    display: block;
    width: 100%;
    box-sizing: border-box;
  }

  .section-sign-up .form-element .form-description {
    margin: 0;
    font-size: 0.95rem;
    color: #777777;
  }

  .section-sign-up .form-element input,
  .section-sign-up .form-element select,
  .section-sign-up .form-element textarea {
    padding: 15px 25px;
    border: 1px solid rgba(204,204,204,1);
    border-radius: 25px;
    width: 100%;
    display: block;
    box-sizing: border-box;
    background-color: rgba(250,250,250,1);
    font-size: 0.95rem;
    margin-top: 1rem;
  }

  .section-sign-up .form-element--button {
    margin-top: 3rem;
  }

  @media only screen and (max-width: 800px) {
    .section-sign-up {
      padding: 25px;
      border-radius: 25px;
    }
  }
</style>

<script>
  const PREV = -1;
  const NEXT = 1;

  const packages = {};
  packages["ee1"] = {
    name: "English Essentials: 1 Month",
    price: 90,
    stripeLink: "https://buy.stripe.com/test_eVa9CdfxngTt54A5kr"
  }
  packages["ee2"] = {
    name: "English Essentials: 3 Months",
    price: 240,
    stripeLink: "https://buy.stripe.com/test_bIY7u51Gx0Uv1SoaEK"
  }
  packages["ee3"] = {
    name: "English Essentials: 1 Year",
    price: 840,
    stripeLink: "https://buy.stripe.com/test_cN28y92KBgTt8gM149"
  }
  packages["wm1"] = {
    name: "Writing Masterclass: 1 Month",
    price: 135,
    stripeLink: "https://buy.stripe.com/test_00gcOpfxn1Yzcx2fZ2"
  }
  packages["wm2"] = {
    name: "Writing Masterclass: 3 Months",
    price: 360,
    stripeLink: "https://buy.stripe.com/test_7sI4hTetjcDd68EeUX"
  }
  packages["wm3"] = {
    name: "Writing Masterclass: 1 Year",
    price: 1200,
    stripeLink: "https://buy.stripe.com/test_6oE8y95WN32D40wdQS"
  }

  const validateFormData = () => {
    const form = document.getElementById("sign-up-form");
    let formData = new FormData(form);
    console.log("Validated");
    console.log(formData);
    return formData;
  }

  $("#form-checkout-btn").click(function (e) {
    // e.preventDefault();
    console.log("Click checkout");
    console.log(e);
    let formData = validateFormData();
  });

  const updateCheckoutLink = () => {
    let formData = validateFormData();
    let selectedClass = formData.get("gurulab-package");
    console.log(selectedClass);
    $("#form-checkout-btn").attr("href", packages[selectedClass].stripeLink);
    $("#form-checkout-btn").text(`Checkout RM ${packages[selectedClass].price.toLocaleString()}`);
  }

  $(document).ready(function () {
    updateCheckoutLink();
  })
</script>